<!DOCTYPE html>
<html lang="es" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Liberando memoria caché - Linux Sysadmin</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://www.linuxsysadmin.tk/2015/11/liberando-memoria-cache.html">

        <meta name="author" content="Gerard" />
        <meta name="keywords" content="linux,kernel,memory manager,drop caches" />
        <meta name="description" content="A veces nos encontramos que nuestro sistema linux parece tener la memoria virtual ocupada, cuando no tenemos nada de memoria RSS; esto no es un problema, ya que por la forma de funcionar del memory manager de linux, se conserva &#34;por si acaso&#34; y se libera cuando realmente se necesita ..." />

        <meta property="og:site_name" content="Linux Sysadmin" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Liberando memoria caché"/>
        <meta property="og:url" content="http://www.linuxsysadmin.tk/2015/11/liberando-memoria-cache.html"/>
        <meta property="og:description" content="A veces nos encontramos que nuestro sistema linux parece tener la memoria virtual ocupada, cuando no tenemos nada de memoria RSS; esto no es un problema, ya que por la forma de funcionar del memory manager de linux, se conserva &#34;por si acaso&#34; y se libera cuando realmente se necesita ..."/>
        <meta property="article:published_time" content="2015-11-02" />
            <meta property="article:section" content="Operaciones" />
            <meta property="article:tag" content="linux" />
            <meta property="article:tag" content="kernel" />
            <meta property="article:tag" content="memory manager" />
            <meta property="article:tag" content="drop caches" />
            <meta property="article:author" content="Gerard" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://www.linuxsysadmin.tk/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="http://www.linuxsysadmin.tk/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://www.linuxsysadmin.tk/theme/css/pygments/vim.css" rel="stylesheet">
    <link rel="stylesheet" href="http://www.linuxsysadmin.tk/theme/css/style.css" type="text/css"/>
        <link href="http://www.linuxsysadmin.tk/static/custom.css" rel="stylesheet">

        <link href="http://www.linuxsysadmin.tk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin ATOM Feed"/>



        <link href="http://www.linuxsysadmin.tk/feeds/operaciones.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin Operaciones ATOM Feed"/>

    <!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
    <script type="text/javascript">
        window.cookieconsent_options = {"message":"De acuerdo a la ley vigente, estoy obligado a informarte de la obviedad de que este sitio utiliza cookies.","dismiss":"Acepto","learnMore":"Mas información","link":null,"theme":"dark-bottom"};
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
    <!-- End Cookie Consent plugin -->

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://www.linuxsysadmin.tk/" class="navbar-brand">
Linux Sysadmin            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://www.linuxsysadmin.tk/about.html">
                             Sobre mí
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://www.linuxsysadmin.tk/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archivos</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="http://www.linuxsysadmin.tk" title="Linux Sysadmin"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="http://www.linuxsysadmin.tk/category/operaciones.html" title="Operaciones">Operaciones</a></li>
                <li class="active">Liberando memoria caché</li>
            </ol>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Banner linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="7977846974"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://www.linuxsysadmin.tk/2015/11/liberando-memoria-cache.html"
                       rel="bookmark"
                       title="Permalink to Liberando memoria caché">
                        Liberando memoria caché
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Fecha</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-11-02T14:00:00+01:00"> 2015-11-02</time>
    </span>


            <span class="label label-default">Autor</span>
            <a href="http://www.linuxsysadmin.tk/author/gerard.html"><i class="fa fa-user"></i> Gerard</a>

        <span class="label label-default">Tiempo de lectura</span> 3 minutos
        <span class="label label-default">Categoría</span>
        <a href="http://www.linuxsysadmin.tk/category/operaciones.html">Operaciones</a>


<span class="label label-default">Tags</span>
	<a href="http://www.linuxsysadmin.tk/tag/linux.html">linux</a>
        /
	<a href="http://www.linuxsysadmin.tk/tag/kernel.html">kernel</a>
        /
	<a href="http://www.linuxsysadmin.tk/tag/memory-manager.html">memory manager</a>
        /
	<a href="http://www.linuxsysadmin.tk/tag/drop-caches.html">drop caches</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>A veces nos encontramos que nuestro sistema linux parece tener la memoria <em>virtual</em> ocupada, cuando no tenemos nada de memoria <em>RSS</em>; esto no es un problema, ya que por la forma de funcionar del <em>memory manager</em> de linux, se conserva "por si acaso" y se libera cuando realmente se necesita.</p>
<div class="highlight"><pre>gerard@desktop:~<span class="nv">$ </span>free -m
             total       used       free     shared    buffers     cached
Mem:          <span class="m">3858</span>       <span class="m">3226</span>        <span class="m">632</span>          <span class="m">0</span>        <span class="m">114</span>       2545
-/+ buffers/cache:        <span class="m">566</span>       3291
Swap:         <span class="m">2381</span>          <span class="m">0</span>       2381
gerard@desktop:~<span class="nv">$ </span>
</pre></div>


<p>Sin embargo este detalle nos puede resultar molesto y puede que queramos <strong>liberar</strong> esa memoria de verdad, por ejemplo, para comparar memoria real ocupada por el sistema o sencillamente porque así lo queremos.</p>
<p>En este caso no tenemos mas remedio que solicitar el <em>memory manager</em> que la libere, escribiendo en el fichero de control habilitado para ello, de acuerdo a la <a href="https://www.kernel.org/doc/Documentation/sysctl/vm.txt">documentación del <em>kernel</em> de linux</a>.</p>
<div class="highlight"><pre>drop_caches

Writing to this will cause the kernel to drop clean caches, as well as
reclaimable slab objects like dentries and inodes.  Once dropped, their
memory becomes free.

To free pagecache:
    <span class="nb">echo </span><span class="m">1</span> &gt; /proc/sys/vm/drop_caches
To free reclaimable slab objects <span class="o">(</span>includes dentries and inodes<span class="o">)</span>:
    <span class="nb">echo </span><span class="m">2</span> &gt; /proc/sys/vm/drop_caches
To free slab objects and pagecache:
    <span class="nb">echo </span><span class="m">3</span> &gt; /proc/sys/vm/drop_caches

This is a non-destructive operation and will not free any dirty objects.
To increase the number of objects freed by this operation, the user may run
<span class="sb">`</span>sync<span class="err">&#39;</span> prior to writing to /proc/sys/vm/drop_caches.  This will minimize the
number of dirty objects on the system and create more candidates to be
dropped.
</pre></div>


<p>Este fichero viene por defecto con permisos de escritura solamente para el usuario <strong>root</strong> y no se puede escribir sin el mismo. Como no queremos trabajar con el usuario <strong>root</strong>, vamos a usar el comando <em>sudo</em> con un usuario normal:</p>
<div class="highlight"><pre>gerard@desktop:~<span class="nv">$ </span>sudo bash -c <span class="s2">&quot;echo 3 &gt; /proc/sys/vm/drop_caches&quot;</span>
gerard@desktop:~<span class="nv">$ </span>
</pre></div>


<p>Alternativamente, podemos utilizar el comando <em>tee</em> para realizar la misma operación, sin el envoltorio de <em>bash</em>:</p>
<div class="highlight"><pre>gerard@desktop:~<span class="nv">$ </span><span class="nb">echo </span><span class="m">3</span> <span class="p">|</span> sudo tee /proc/sys/vm/drop_caches
3
gerard@desktop:~<span class="nv">$ </span>
</pre></div>


<p>Y finalmente nuestra memoria queda vacía de todo aquello que no era indispensable para la ejecución del sistema.</p>
<div class="highlight"><pre>gerard@desktop:~<span class="nv">$ </span>free -m
             total       used       free     shared    buffers     cached
Mem:          <span class="m">3858</span>        <span class="m">752</span>       <span class="m">3105</span>          <span class="m">0</span>          <span class="m">2</span>        207
-/+ buffers/cache:        <span class="m">542</span>       3315
Swap:         <span class="m">2381</span>          <span class="m">0</span>       2381
gerard@desktop:~<span class="nv">$ </span>
</pre></div>


<p>¡Acabamos de liberar 2 gigabytes de memoria!</p>
<p><strong>CUIDADO</strong>: Esta operación puede afectar el rendimiento puntual del sistema, ya que en caso de volver a necesitar la información <em>cacheada</em>, deberá volver a recargar la memoria, probablemente desde disco.</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Posts relacionados:</h4>
    <ul>
        <li><a href="http://www.linuxsysadmin.tk/2015/11/creando-sistemas-de-ficheros-temporales-con-tmpfs.html">Creando sistemas de ficheros temporales con tmpfs</a></li>
        <li><a href="http://www.linuxsysadmin.tk/2015/12/utilizando-apt-cacher-ng-para-agilizar-la-instalacion-de-paquetes.html">Utilizando apt-cacher-ng para agilizar la instalación de paquetes</a></li>
        <li><a href="http://www.linuxsysadmin.tk/2015/12/empaquetando-ficheros-punto-deb.html">Empaquetando ficheros .deb</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

                    var disqus_identifier = 'liberando-memoria-cache';
                var disqus_url = 'http://www.linuxsysadmin.tk/2015/11/liberando-memoria-cache.html';

            var disqus_config = function () {
                this.language = "es";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/sirtea"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
              </ul>
            </li>


            <li class="list-group-item"><a href="http://www.linuxsysadmin.tk/categories.html"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categorías</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.tk/category/operaciones.html">
                            <i class="fa fa-folder-open fa-lg"></i> Operaciones
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.tk/category/seguridad.html">
                            <i class="fa fa-folder-open fa-lg"></i> Seguridad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.tk/category/sistemas.html">
                            <i class="fa fa-folder-open fa-lg"></i> Sistemas
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.tk/category/virtualizacion.html">
                            <i class="fa fa-folder-open fa-lg"></i> Virtualización
                        </a>
                    </li>
                </ul>
            </li>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Sidebar linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="1931313371"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            <li class="list-group-item"><a href="http://www.linuxsysadmin.tk/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/apt-cacher-ng.html">
                            apt-cacher-ng
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.tk/tag/bridge.html">
                            bridge
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/cache.html">
                            cache
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/deb.html">
                            .deb
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.tk/tag/debian.html">
                            debian
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/debootstrap.html">
                            debootstrap
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/drop-caches.html">
                            drop caches
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.tk/tag/firehol.html">
                            firehol
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/genisoimage.html">
                            genisoimage
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/iso.html">
                            iso
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/isolinux.html">
                            isolinux
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/jaula.html">
                            jaula
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.tk/tag/jessie.html">
                            jessie
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/kernel.html">
                            kernel
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/ldd.html">
                            ldd
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.tk/tag/linux.html">
                            linux
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/livecd.html">
                            livecd
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.tk/tag/lxc.html">
                            lxc
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/memory-manager.html">
                            memory manager
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.tk/tag/mongodb.html">
                            mongodb
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/nginx.html">
                            nginx
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/nmap.html">
                            nmap
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/paquete.html">
                            paquete
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/port-knocking.html">
                            port knocking
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/raid.html">
                            raid
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/replica-set.html">
                            replica set
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/rssh.html">
                            rssh
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/rsync.html">
                            rsync
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/squashfs.html">
                            squashfs
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.tk/tag/ssh.html">
                            ssh
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.tk/tag/systemd.html">
                            systemd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/tmpfs.html">
                            tmpfs
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/ubuntu.html">
                            ubuntu
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.tk/tag/zerofree.html">
                            zerofree
                        </a>
                    </li>
                </ul>
            </li>


    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Gerard
            &middot; Generado por <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Volver arriba</a></p></div>
      </div>
   </div>
</footer>
<script src="http://www.linuxsysadmin.tk/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://www.linuxsysadmin.tk/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://www.linuxsysadmin.tk/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-68486572-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>